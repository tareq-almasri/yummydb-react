{"ast":null,"code":"var _jsxFileName = \"/home/dci/DCI-2019-2020/yummy-db-heroku-netlify/react/src/components/Login.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { TokenContext } from \"./TokenContext\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nexport default function Login(props) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [token, setToken] = useContext(TokenContext);\n  const history = useHistory();\n  useEffect(() => {\n    if (props.location.state.email && props.location.state.password) {\n      setEmail(props.location.state.email);\n      setPassword(props.location.state.password);\n    }\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault(); // fetch(`https://yummydb-api.herokuapp.com/login`, {\n\n    fetch(`http://localhost:5000/login`, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: email,\n        password: password\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.err) {\n        setErrMsg(data.err);\n      } else {\n        setToken(data.token);\n        history.push(\"/\");\n      }\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: \"500px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      height: \"60px\",\n      color: \"#F94F72\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \" \", errMsg, \" \"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"userInfo\",\n    type: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      marginTop: \"30px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"password\"), React.createElement(\"input\", {\n    className: \"userInfo\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"30px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"bbtn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Login\")))), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/home/dci/DCI-2019-2020/yummy-db-heroku-netlify/react/src/components/Login.js"],"names":["React","useState","useContext","useEffect","TokenContext","useHistory","Header","Footer","Login","props","email","setEmail","password","setPassword","errMsg","setErrMsg","token","setToken","history","location","state","handleSubmit","e","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","err","push","display","flexDirection","justifyContent","alignItems","height","color","target","value","marginTop","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { TokenContext } from \"./TokenContext\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\n\nexport default function Login(props) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [token, setToken] = useContext(TokenContext);\n  const history = useHistory();\n\n  useEffect(() => {\n    if (props.location.state.email && props.location.state.password) {\n      setEmail(props.location.state.email);\n      setPassword(props.location.state.password);\n    }\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // fetch(`https://yummydb-api.herokuapp.com/login`, {\n    fetch(`http://localhost:5000/login`, {\n      method: \"POST\",\n      body: JSON.stringify({ email: email, password: password }),\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.err) {\n          setErrMsg(data.err);\n        } else {\n          setToken(data.token);\n          history.push(\"/\");\n        }\n      });\n  };\n  return (\n    <div>\n      <Header />\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"500px\",\n        }}\n      >\n        <div style={{ height: \"60px\", color: \"#F94F72\" }}> {errMsg} </div>\n        <form onSubmit={handleSubmit}>\n          <div>Email</div>\n          <input\n            className=\"userInfo\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <div style={{ marginTop: \"30px\" }}>password</div>\n          <input\n            className=\"userInfo\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <div style={{ textAlign: \"center\", marginTop: \"30px\" }}>\n            <button className=\"bbtn\">Login</button>\n          </div>\n        </form>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}