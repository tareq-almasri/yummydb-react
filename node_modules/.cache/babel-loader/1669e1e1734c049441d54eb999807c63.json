{"ast":null,"code":"var _jsxFileName = \"/home/dci/DCI-2019-2020/yummy-db-vercel-netlify/react/src/components/OneRecipe.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport \"../styles/OneRecipe.css\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { TokenContext } from \"./TokenContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { NavLink } from \"reactstrap\";\n\nconst OneRecipe = ({\n  match\n}) => {\n  const [recipe, setRecipe] = useState({});\n  const [ingredients, setIngredients] = useState([]);\n  const [ingDetails, setIngDetails] = useState([]);\n  const [instructions, setInstructions] = useState([]);\n  const [servings, setServings] = useState(1);\n  const [isFav, setIsFav] = useState(false);\n  const [token, setToken] = useContext(TokenContext);\n  const [recID, setRecID] = useState();\n  const [wineObj, setWineObj] = useState({});\n  const [title, setTitle] = useState(\"\");\n  console.log(setToken);\n  useEffect(() => {\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/information?amount=1&apiKey=${process.env.REACT_APP_API_IN_USE}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      setRecipe(res);\n      setTitle(res.title);\n      setWineObj(res.winePairing);\n      setIngredients(res.extendedIngredients);\n      setRecID(res.id);\n\n      if (token) {\n        checkFav(res.id);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/nutritionWidget.json?&apiKey=${process.env.REACT_APP_API_IN_USE}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => setIngDetails(res)).catch(err => {\n      console.log(err);\n    });\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/analyzedInstructions?&apiKey=${process.env.REACT_APP_API_IN_USE}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => setInstructions(res[0].steps)).catch(err => {\n      console.log(err);\n    });\n\n    const checkFav = id => {\n      // fetch(`https://yummydb-api.herokuapp.com/check-fav/${id}`, {\n      fetch(`http://localhost:5000/check-fav/${id}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-auth\": token\n        }\n      }).then(res => res.json()).then(data => setIsFav(data));\n    };\n  }, [match.params.id, servings, token]);\n\n  const handleAddToFav = () => {\n    if (isFav) {\n      // fetch(`https://yummydb-api.herokuapp.com/remove-fav/${recID}`, {\n      fetch(`http://localhost:5000/remove-fav/${recID}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-auth\": token\n        },\n        method: \"DELETE\"\n      }).then(res => res.json()).then(data => {\n        setIsFav(!isFav);\n        console.log(data);\n      });\n    } else {\n      // fetch(`https://yummydb-api.herokuapp.com/add-fav`, {\n      fetch(`http://localhost:5000/add-fav`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-auth\": token\n        },\n        body: JSON.stringify({\n          recipe: recipe\n        }),\n        method: \"POST\"\n      }).then(res => res.json()).then(data => {\n        setIsFav(!isFav);\n        console.log(data);\n      });\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(\"h2\", {\n    className: \"recipe-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, title.replace(/^\\w/, c => c.toUpperCase())), React.createElement(\"div\", {\n    className: \"main-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"image-nutrition\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"recipe-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"image-fav-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, token ? React.createElement(NavLink, {\n    className: \"star\",\n    title: isFav ? \"remove from favorite\" : \"add to favorite\",\n    onClick: handleAddToFav,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faStar,\n    color: isFav ? \"yellow\" : \"gray\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    id: \"fav-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, isFav ? \"Remove from favorite\" : \"Add to favorite\")) : \"\", React.createElement(\"img\", {\n    id: \"image\",\n    src: recipe.image,\n    alt: recipe.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"recipe-nutrition\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"Calories: \", ingDetails.calories, \"kcal\"), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Carbs: \", ingDetails.carbs), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"Fat: \", ingDetails.fat), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Protein: \", ingDetails.protein)))), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"ingrediets-instructions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"Ingredients\"), React.createElement(\"h5\", {\n    className: \"text-servings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"Servings:\", React.createElement(\"input\", {\n    id: \"input-servings\",\n    autoFocus: true,\n    type: \"Number\",\n    min: \"1\",\n    value: servings,\n    onChange: e => setServings(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"ingredients-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, console.log(ingredients), ingredients.map(res => React.createElement(\"div\", {\n    key: Math.random(),\n    className: \"ingredients\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"ingredients-details\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, res.amount * servings, \" \", res.unit), React.createElement(\"div\", {\n    className: \"imagine-ingredients-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: `https://spoonacular.com/cdn/ingredients_100x100/${res.image}`,\n    alt: res.title,\n    className: \"image-ingredient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    className: \"ingredients-details\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, res.name))))), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Instructions\"), instructions.map(res => React.createElement(\"li\", {\n    key: Math.random(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"badge badge-warning\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, res.number), React.createElement(\"span\", {\n    id: \"instruction\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, res.step)))), wineObj.pairedWines ? React.createElement(\"div\", {\n    className: \"section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, \"Wine pairing\"), wineObj.pairingText) : \"\")), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }));\n};\n\nexport default OneRecipe;","map":{"version":3,"sources":["/home/dci/DCI-2019-2020/yummy-db-vercel-netlify/react/src/components/OneRecipe.js"],"names":["React","useState","useEffect","useContext","Header","Footer","TokenContext","FontAwesomeIcon","faStar","NavLink","OneRecipe","match","recipe","setRecipe","ingredients","setIngredients","ingDetails","setIngDetails","instructions","setInstructions","servings","setServings","isFav","setIsFav","token","setToken","recID","setRecID","wineObj","setWineObj","title","setTitle","console","log","fetch","params","id","process","env","REACT_APP_API_IN_USE","method","headers","then","res","json","winePairing","extendedIngredients","checkFav","catch","err","steps","data","handleAddToFav","body","JSON","stringify","replace","c","toUpperCase","image","calories","carbs","fat","protein","e","target","value","map","Math","random","amount","unit","name","number","step","pairedWines","pairingText"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAO,yBAAP;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,QAAuB,mCAAvB;AACA,SAASC,OAAT,QAAwB,YAAxB;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAC/B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACe,UAAD,EAAaC,aAAb,IAA8BhB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACiB,YAAD,EAAeC,eAAf,IAAkClB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACmB,QAAD,EAAWC,WAAX,IAA0BpB,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACqB,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACuB,KAAD,EAAQC,QAAR,IAAoBtB,UAAU,CAACG,YAAD,CAApC;AACA,QAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoB1B,QAAQ,EAAlC;AACA,QAAM,CAAC2B,OAAD,EAAUC,UAAV,IAAwB5B,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC6B,KAAD,EAAQC,QAAR,IAAoB9B,QAAQ,CAAC,EAAD,CAAlC;AACA+B,EAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ;AAGAvB,EAAAA,SAAS,CAAC,MAAM;AACdgC,IAAAA,KAAK,CACF,uCAAsCvB,KAAK,CAACwB,MAAN,CAAaC,EAAG,gCAA+BC,OAAO,CAACC,GAAR,CAAYC,oBAAqB,EADpH,EAEH;AACEC,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAFX,KAFG,CAAL,CASGC,IATH,CASSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EATjB,EAUGF,IAVH,CAUSC,GAAD,IAAS;AACb9B,MAAAA,SAAS,CAAC8B,GAAD,CAAT;AACAZ,MAAAA,QAAQ,CAACY,GAAG,CAACb,KAAL,CAAR;AACAD,MAAAA,UAAU,CAACc,GAAG,CAACE,WAAL,CAAV;AACA9B,MAAAA,cAAc,CAAC4B,GAAG,CAACG,mBAAL,CAAd;AACAnB,MAAAA,QAAQ,CAACgB,GAAG,CAACP,EAAL,CAAR;;AACA,UAAIZ,KAAJ,EAAW;AACTuB,QAAAA,QAAQ,CAACJ,GAAG,CAACP,EAAL,CAAR;AACD;AACF,KAnBH,EAoBGY,KApBH,CAoBUC,GAAD,IAAS;AACdjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,KAtBH;AAuBAf,IAAAA,KAAK,CACF,uCAAsCvB,KAAK,CAACwB,MAAN,CAAaC,EAAG,iCAAgCC,OAAO,CAACC,GAAR,CAAYC,oBAAqB,EADrH,EAEH;AACEC,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAFX,KAFG,CAAL,CASGC,IATH,CASSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EATjB,EAUGF,IAVH,CAUSC,GAAD,IAAS1B,aAAa,CAAC0B,GAAD,CAV9B,EAWGK,KAXH,CAWUC,GAAD,IAAS;AACdjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,KAbH;AAcAf,IAAAA,KAAK,CACF,uCAAsCvB,KAAK,CAACwB,MAAN,CAAaC,EAAG,iCAAgCC,OAAO,CAACC,GAAR,CAAYC,oBAAqB,EADrH,EAEH;AACEC,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAFX,KAFG,CAAL,CASGC,IATH,CASSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EATjB,EAUGF,IAVH,CAUSC,GAAD,IAASxB,eAAe,CAACwB,GAAG,CAAC,CAAD,CAAH,CAAOO,KAAR,CAVhC,EAWGF,KAXH,CAWUC,GAAD,IAAS;AACdjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,KAbH;;AAeA,UAAMF,QAAQ,GAAIX,EAAD,IAAQ;AACvB;AACEF,MAAAA,KAAK,CAAE,mCAAkCE,EAAG,EAAvC,EAA0C;AAC7CK,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAUjB;AAFH;AADoC,OAA1C,CAAL,CAMGkB,IANH,CAMSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EANjB,EAOGF,IAPH,CAOSS,IAAD,IAAU5B,QAAQ,CAAC4B,IAAD,CAP1B;AAQH,KAVD;AAWD,GAhEQ,EAgEN,CAACxC,KAAK,CAACwB,MAAN,CAAaC,EAAd,EAAkBhB,QAAlB,EAA4BI,KAA5B,CAhEM,CAAT;;AAkEA,QAAM4B,cAAc,GAAG,MAAM;AAC3B,QAAI9B,KAAJ,EAAW;AACT;AACEY,MAAAA,KAAK,CAAE,oCAAmCR,KAAM,EAA3C,EAA8C;AACjDe,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAUjB;AAFH,SADwC;AAKjDgB,QAAAA,MAAM,EAAE;AALyC,OAA9C,CAAL,CAOGE,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CAQSS,IAAD,IAAU;AACd5B,QAAAA,QAAQ,CAAC,CAACD,KAAF,CAAR;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAZ;AACD,OAXH;AAYH,KAdD,MAcO;AACL;AACEjB,MAAAA,KAAK,CAAE,+BAAF,EAAkC;AACrCO,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAUjB;AAFH,SAD4B;AAKrC6B,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAE3C,UAAAA,MAAM,EAAEA;AAAV,SAAf,CAL+B;AAMrC4B,QAAAA,MAAM,EAAE;AAN6B,OAAlC,CAAL,CAQGE,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,EASGF,IATH,CASSS,IAAD,IAAU;AACd5B,QAAAA,QAAQ,CAAC,CAACD,KAAF,CAAR;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAZ;AACD,OAZH;AAaH;AACF,GA/BD;;AAiCA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8BrB,KAAK,CAAC0B,OAAN,CAAc,KAAd,EAAsBC,CAAD,IAAOA,CAAC,CAACC,WAAF,EAA5B,CAA9B,CAFF,EAIE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACClC,KAAK,GACF,oBAAC,OAAD;AACE,IAAA,SAAS,EAAC,MADZ;AAEE,IAAA,KAAK,EAAEF,KAAK,GAAG,sBAAH,GAA4B,iBAF1C;AAGE,IAAA,OAAO,EAAE8B,cAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE,oBAAC,eAAD;AACE,IAAA,IAAI,EAAE5C,MADR;AAEE,IAAA,KAAK,EAAEc,KAAK,GAAG,QAAH,GAAc,MAF5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EASA;AAAM,IAAA,EAAE,EAAC,UAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBA,KAAK,GAAG,sBAAH,GAA4B,iBAAtD,CATA,CADE,GAYF,EAbJ,EAeE;AAAK,IAAA,EAAE,EAAC,OAAR;AAAgB,IAAA,GAAG,EAAEV,MAAM,CAAC+C,KAA5B;AAAmC,IAAA,GAAG,EAAE/C,MAAM,CAACkB,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,CADA,EAmBE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAiBd,UAAU,CAAC4C,QAA5B,SADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAc5C,UAAU,CAAC6C,KAAzB,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAY7C,UAAU,CAAC8C,GAAvB,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAgB9C,UAAU,CAAC+C,OAA3B,CAJF,CAnBF,CADF,CADF,EA6BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7BF,EA8BE;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAI,IAAA,SAAS,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AACE,IAAA,EAAE,EAAC,gBADL;AAEE,IAAA,SAAS,MAFX;AAGE,IAAA,IAAI,EAAC,QAHP;AAIE,IAAA,GAAG,EAAC,GAJN;AAKE,IAAA,KAAK,EAAE3C,QALT;AAME,IAAA,QAAQ,EAAG4C,CAAD,IAAO3C,WAAW,CAAC2C,CAAC,CAACC,MAAF,CAASC,KAAV,CAN9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAFF,EAcE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlC,OAAO,CAACC,GAAR,CAAYnB,WAAZ,CADH,EAGGA,WAAW,CAACqD,GAAZ,CAAiBxB,GAAD,IAEf;AAAK,IAAA,GAAG,EAAEyB,IAAI,CAACC,MAAL,EAAV;AAAyB,IAAA,SAAS,EAAC,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAG,IAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1B,GAAG,CAAC2B,MAAJ,GAAalD,QADhB,OAC2BuB,GAAG,CAAC4B,IAD/B,CAFF,EAKE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,GAAG,EAAG,mDAAkD5B,GAAG,CAACgB,KAAM,EADpE;AAEE,IAAA,GAAG,EAAEhB,GAAG,CAACb,KAFX;AAGE,IAAA,SAAS,EAAC,kBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,EAYE;AAAG,IAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCa,GAAG,CAAC6B,IAAxC,CAZF,CAFD,CAHH,CAdF,CADF,EAoCQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApCR,EAqCE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEGtD,YAAY,CAACiD,GAAb,CAAkBxB,GAAD,IAChB;AAAI,IAAA,GAAG,EAAEyB,IAAI,CAACC,MAAL,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAM,IAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuC1B,GAAG,CAAC8B,MAA3C,CADA,EAGE;AAAM,IAAA,EAAE,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwB9B,GAAG,CAAC+B,IAA5B,CAHF,CADD,CAFH,CArCF,EA+CK9C,OAAO,CAAC+C,WAAR,GAEC;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzB,EACE;AAAI,IAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEG/C,OAAO,CAACgD,WAFX,CAFD,GAOC,EAtDN,CA9BF,CAJF,EA6FE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7FF,CADF;AAiGD,CAlND;;AAmNA,eAAelE,SAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport \"../styles/OneRecipe.css\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { TokenContext } from \"./TokenContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { NavLink } from \"reactstrap\";\n\nconst OneRecipe = ({ match }) => {\n  const [recipe, setRecipe] = useState({});\n  const [ingredients, setIngredients] = useState([]);\n  const [ingDetails, setIngDetails] = useState([]);\n  const [instructions, setInstructions] = useState([]);\n  const [servings, setServings] = useState(1);\n  const [isFav, setIsFav] = useState(false);\n  const [token, setToken] = useContext(TokenContext);\n  const [recID, setRecID] = useState();\n  const [wineObj, setWineObj] = useState({});\n  const [title, setTitle] = useState(\"\");\n  console.log(setToken)\n\n\n  useEffect(() => {\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/information?amount=1&apiKey=${process.env.REACT_APP_API_IN_USE}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => {\n        setRecipe(res);\n        setTitle(res.title);\n        setWineObj(res.winePairing);\n        setIngredients(res.extendedIngredients);\n        setRecID(res.id);\n        if (token) {\n          checkFav(res.id);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/nutritionWidget.json?&apiKey=${process.env.REACT_APP_API_IN_USE}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => setIngDetails(res))\n      .catch((err) => {\n        console.log(err);\n      });\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/analyzedInstructions?&apiKey=${process.env.REACT_APP_API_IN_USE}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => setInstructions(res[0].steps))\n      .catch((err) => {\n        console.log(err);\n      });\n\n    const checkFav = (id) => {\n      // fetch(`https://yummydb-api.herokuapp.com/check-fav/${id}`, {\n        fetch(`http://localhost:5000/check-fav/${id}`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-auth\": token,\n          },\n        })\n          .then((res) => res.json())\n          .then((data) => setIsFav(data));\n    };\n  }, [match.params.id, servings, token]);\n\n  const handleAddToFav = () => {\n    if (isFav) {\n      // fetch(`https://yummydb-api.herokuapp.com/remove-fav/${recID}`, {\n        fetch(`http://localhost:5000/remove-fav/${recID}`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-auth\": token,\n          },\n          method: \"DELETE\",\n        })\n          .then((res) => res.json())\n          .then((data) => {\n            setIsFav(!isFav);\n            console.log(data);\n          });\n    } else {\n      // fetch(`https://yummydb-api.herokuapp.com/add-fav`, {\n        fetch(`http://localhost:5000/add-fav`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-auth\": token,\n          },\n          body: JSON.stringify({ recipe: recipe }),\n          method: \"POST\",\n        })\n          .then((res) => res.json())\n          .then((data) => {\n            setIsFav(!isFav);\n            console.log(data);\n          });\n    }\n  };\n\n  return (\n    <div>\n      <Header />\n      <h2 className=\"recipe-title\">{title.replace(/^\\w/, (c) => c.toUpperCase())}</h2>\n      \n      <div className=\"main-section\">\n        <div className=\"image-nutrition\">\n          <div className=\"recipe-image\">\n          <div className=\"image-fav-icon\">\n          {token ? (\n              <NavLink\n                className=\"star\"\n                title={isFav ? \"remove from favorite\" : \"add to favorite\"}\n                onClick={handleAddToFav}\n              >\n                <FontAwesomeIcon\n                  icon={faStar}\n                  color={isFav ? \"yellow\" : \"gray\"}\n                />\n              <span id=\"fav-text\">{isFav ? \"Remove from favorite\" : \"Add to favorite\"}</span></NavLink>\n            ) : (\n              \"\"\n            )}\n            <img id=\"image\" src={recipe.image} alt={recipe.title} />\n            \n            </div>\n            <div className=\"recipe-nutrition\">\n              <span>Calories: {ingDetails.calories}kcal</span>\n              <span>Carbs: {ingDetails.carbs}</span>\n              <span>Fat: {ingDetails.fat}</span>\n              <span>Protein: {ingDetails.protein}</span>\n            </div>\n          </div>\n        </div>\n        <hr/>\n        <div className=\"ingrediets-instructions\">\n          <div className=\"section\">\n            <h3 className=\"title\">Ingredients</h3>\n            <h5 className=\"text-servings\">\n              Servings:\n              <input \n                id=\"input-servings\"\n                autoFocus\n                type=\"Number\"\n                min=\"1\"\n                value={servings}\n                onChange={(e) => setServings(e.target.value)}\n              />\n            </h5>\n\n            <div className=\"ingredients-section\">\n              {console.log(ingredients)}\n              \n              {ingredients.map((res) => (\n                \n                <div key={Math.random()} className=\"ingredients\">\n                \n                  <p className=\"ingredients-details\">\n                    {res.amount * servings} {res.unit}\n                  </p>\n                  <div className=\"imagine-ingredients-section\">\n                    <img\n                      src={`https://spoonacular.com/cdn/ingredients_100x100/${res.image}`}\n                      alt={res.title}\n                      className=\"image-ingredient\"\n                    />\n                  </div>\n                  <p className=\"ingredients-details\">{res.name}</p>\n                </div>\n              ))}\n            </div>\n          </div><hr/>\n          <div className=\"section\">\n            <h3 className=\"title\">Instructions</h3>\n            {instructions.map((res) => (\n              <li key={Math.random()}>\n              <span className=\"badge badge-warning\">{res.number}</span>\n                {/* <span id=\"instruction-number\">{res.number}</span> */}\n                <span id=\"instruction\">{res.step}</span>\n              </li>\n            ))}\n          </div>\n            {wineObj.pairedWines  ? (\n              \n              <div className=\"section\"><hr/>\n                <h3 className=\"title\">Wine pairing</h3>\n                {wineObj.pairingText}\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n        \n      </div>\n      <Footer />\n    </div>\n  );\n};\nexport default OneRecipe;\n"]},"metadata":{},"sourceType":"module"}