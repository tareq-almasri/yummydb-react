{"ast":null,"code":"import _slicedToArray from\"/home/dci/DCI-2019-2020/yummy-db-vercel-netlify/react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{TokenContext}from\"./TokenContext\";import{useHistory}from\"react-router-dom\";import Header from\"./Header\";import Footer from\"./Footer\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrMsg=_useState6[1];var _useContext=useContext(TokenContext),_useContext2=_slicedToArray(_useContext,2),token=_useContext2[0],setToken=_useContext2[1];var history=useHistory();console.log(token);var handleSubmit=function handleSubmit(e){e.preventDefault();fetch(\"https://yummydb-api.herokuapp.com/login\",{method:\"POST\",body:JSON.stringify({email:email,password:password}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.err){setErrMsg(data.err);}else{setToken(data.token);history.push(\"/\");}});};return React.createElement(\"div\",null,React.createElement(Header,null),React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\",height:\"500px\"}},React.createElement(\"div\",{style:{height:\"60px\",color:\"#F94F72\"}},\" \",errMsg,\" \"),React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(\"div\",null,\"Email\"),React.createElement(\"input\",{className:\"userInfo\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),React.createElement(\"div\",{style:{marginTop:\"30px\"}},\"password\"),React.createElement(\"input\",{className:\"userInfo\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),React.createElement(\"div\",{style:{textAlign:\"center\",marginTop:\"30px\"}},React.createElement(\"button\",{className:\"bbtn\"},\"Login\")))),React.createElement(Footer,null));}","map":{"version":3,"sources":["/home/dci/DCI-2019-2020/yummy-db-vercel-netlify/react/src/components/Login.js"],"names":["React","useState","useContext","TokenContext","useHistory","Header","Footer","Login","email","setEmail","password","setPassword","errMsg","setErrMsg","token","setToken","history","console","log","handleSubmit","e","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","err","push","display","flexDirection","justifyContent","alignItems","height","color","target","value","marginTop","textAlign"],"mappings":"wIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,YAAT,KAA6B,gBAA7B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAGA,cAAe,SAASC,CAAAA,KAAT,EAAiB,eACJN,QAAQ,CAAC,EAAD,CADJ,wCACvBO,KADuB,eAChBC,QADgB,8BAEER,QAAQ,CAAC,EAAD,CAFV,yCAEvBS,QAFuB,eAEbC,WAFa,8BAGJV,QAAQ,CAAC,EAAD,CAHJ,yCAGvBW,MAHuB,eAGfC,SAHe,+BAIJX,UAAU,CAACC,YAAD,CAJN,4CAIvBW,KAJuB,iBAIhBC,QAJgB,iBAK9B,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CACAa,OAAO,CAACC,GAAR,CAAYJ,KAAZ,EAEA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACxBA,CAAC,CAACC,cAAF,GACAC,KAAK,2CAA4C,CAC/CC,MAAM,CAAE,MADuC,CAE/CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAElB,KAAK,CAAEA,KAAT,CAAgBE,QAAQ,CAAEA,QAA1B,CAAf,CAFyC,CAG/CiB,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAHsC,CAA5C,CAAL,CAKGC,IALH,CAKQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EALR,EAMGF,IANH,CAMQ,SAACG,IAAD,CAAU,CACd,GAAIA,IAAI,CAACC,GAAT,CAAc,CACZnB,SAAS,CAACkB,IAAI,CAACC,GAAN,CAAT,CACD,CAFD,IAEO,CACLjB,QAAQ,CAACgB,IAAI,CAACjB,KAAN,CAAR,CACAE,OAAO,CAACiB,IAAR,CAAa,GAAb,EACD,CACF,CAbH,EAcD,CAhBD,CAiBA,MACE,gCACE,oBAAC,MAAD,MADF,CAEE,2BACE,KAAK,CAAE,CACLC,OAAO,CAAE,MADJ,CAELC,aAAa,CAAE,QAFV,CAGLC,cAAc,CAAE,QAHX,CAILC,UAAU,CAAE,QAJP,CAKLC,MAAM,CAAE,OALH,CADT,EASE,2BAAK,KAAK,CAAE,CAAEA,MAAM,CAAE,MAAV,CAAkBC,KAAK,CAAE,SAAzB,CAAZ,MAAoD3B,MAApD,KATF,CAUE,4BAAM,QAAQ,CAAEO,YAAhB,EACE,uCADF,CAEE,6BACE,SAAS,CAAC,UADZ,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAEX,KAHT,CAIE,QAAQ,CAAE,kBAACY,CAAD,QAAOX,CAAAA,QAAQ,CAACW,CAAC,CAACoB,MAAF,CAASC,KAAV,CAAf,EAJZ,EAFF,CAQE,2BAAK,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAZ,aARF,CASE,6BACE,SAAS,CAAC,UADZ,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAEhC,QAHT,CAIE,QAAQ,CAAE,kBAACU,CAAD,QAAOT,CAAAA,WAAW,CAACS,CAAC,CAACoB,MAAF,CAASC,KAAV,CAAlB,EAJZ,EATF,CAeE,2BAAK,KAAK,CAAE,CAAEE,SAAS,CAAE,QAAb,CAAuBD,SAAS,CAAE,MAAlC,CAAZ,EACE,8BAAQ,SAAS,CAAC,MAAlB,UADF,CAfF,CAVF,CAFF,CAgCE,oBAAC,MAAD,MAhCF,CADF,CAoCD","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { TokenContext } from \"./TokenContext\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\n\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errMsg, setErrMsg]=useState('')\n  const [token, setToken] = useContext(TokenContext);\n  const history = useHistory();\n  console.log(token)\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    fetch(`https://yummydb-api.herokuapp.com/login`, {\n      method: \"POST\",\n      body: JSON.stringify({ email: email, password: password }),\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.err) {\n          setErrMsg(data.err);\n        } else {\n          setToken(data.token);\n          history.push(\"/\");\n        }\n      });\n  };\n  return (\n    <div>\n      <Header />\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"500px\",\n        }}\n      >\n        <div style={{ height: \"60px\", color: \"#F94F72\" }}> {errMsg} </div>\n        <form onSubmit={handleSubmit}>\n          <div>Email</div>\n          <input\n            className=\"userInfo\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <div style={{ marginTop: \"30px\" }}>password</div>\n          <input\n            className=\"userInfo\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <div style={{ textAlign: \"center\", marginTop: \"30px\" }}>\n            <button className=\"bbtn\">Login</button>\n          </div>\n        </form>\n      </div>\n      <Footer />\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}