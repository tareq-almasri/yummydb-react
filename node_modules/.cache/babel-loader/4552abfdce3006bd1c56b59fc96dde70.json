{"ast":null,"code":"var _jsxFileName = \"/home/dci/lord-of-scripts/final-project/food-nutrition/src/components/OneRecipe.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport \"../styles/OneRecipe.css\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { TokenContext } from \"./TokenContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { NavLink } from \"reactstrap\";\n\nconst OneRecipe = ({\n  match\n}) => {\n  const [recipe, setRecipe] = useState({});\n  const [ingredients, setIngredients] = useState([]);\n  const [ingDetails, setIngDetails] = useState([]);\n  const [instructions, setInstructions] = useState([]);\n  const [servings, setServings] = useState(1);\n  const [isFav, setIsFav] = useState(false);\n  const [token, setToken] = useContext(TokenContext);\n  const [recID, setRecID] = useState();\n  useEffect(() => {\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/information?amount=1&apiKey=d21f98ccdf934ed5ac7c1e724093d571`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      setRecipe(res);\n      setRecID(res.id);\n      setIngredients(res.extendedIngredients);\n\n      if (token) {\n        checkFav(res.id);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/nutritionWidget.json?&apiKey=d21f98ccdf934ed5ac7c1e724093d571`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => setIngDetails(res)).catch(err => {\n      console.log(err);\n    });\n    fetch(`https://api.spoonacular.com/recipes/${match.params.id}/analyzedInstructions?&apiKey=d21f98ccdf934ed5ac7c1e724093d571`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => setInstructions(res[0].steps)).catch(err => {\n      console.log(err);\n    });\n\n    const checkFav = id => {\n      fetch(`http://localhost:5000/check-fav/${id}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(data => console.log(data));\n    };\n  }, [match.params.id, token]);\n\n  const handleAddToFav = () => {\n    if (isFav) {\n      fetch(`http://localhost:5000/remove-fav/${recID}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        method: \"DELETE\"\n      }).then(res => res.json()).then(data => {\n        setIsFav(!isFav);\n        console.log(data);\n      });\n    } else {\n      fetch(\"http://localhost:5000/add-fav\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          recipe: recipe\n        }),\n        method: \"POST\"\n      }).then(res => res.json()).then(data => {\n        setIsFav(!isFav);\n        console.log(data);\n      });\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(Header, {\n    x: \"#000\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(\"h2\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"1rem 0\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, recipe.title), token ? React.createElement(NavLink, {\n    className: \"star\",\n    title: isFav ? \"remove from favorite\" : \"add to favorite\",\n    onClick: handleAddToFav,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faStar,\n    color: isFav ? \"yellow\" : \"gray\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  })) : \"\", React.createElement(\"div\", {\n    className: \"main-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"image-nutrition\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"recipe-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    id: \"image\",\n    src: recipe.image,\n    alt: recipe.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"recipe-nutrition\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Calories:\", ingDetails.calories), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Carbs:\", ingDetails.carbs), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"Fat: \", ingDetails.fat), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Protein: \", ingDetails.protein)))), React.createElement(\"div\", {\n    className: \"ingrediets-instructions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"ingredients-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, \"Ingredients\"), React.createElement(\"h5\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"Servings:\", React.createElement(\"input\", {\n    style: {\n      width: \"30px\",\n      border: \"none\"\n    },\n    type: \"Number\",\n    min: \"1\",\n    value: servings,\n    onChange: e => setServings(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"ingredients-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, console.log(recipe), ingredients.map(res => React.createElement(\"div\", {\n    key: res.id,\n    className: \"ingredients\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, res.amount * servings, \" \", res.unit), React.createElement(\"div\", {\n    className: \"imagine-ingredients-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: `https://spoonacular.com/cdn/ingredients_100x100/${res.image}`,\n    alt: res.title,\n    className: \"image-ingredient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, res.name))))), React.createElement(\"div\", {\n    className: \"instructions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"Instructions\"), instructions.map(res => React.createElement(\"li\", {\n    key: Math.random(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, \"Step \", res.number, \" : \", res.step))))), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }));\n};\n\nexport default OneRecipe;","map":{"version":3,"sources":["/home/dci/lord-of-scripts/final-project/food-nutrition/src/components/OneRecipe.js"],"names":["React","useState","useEffect","useContext","Header","Footer","TokenContext","FontAwesomeIcon","faStar","NavLink","OneRecipe","match","recipe","setRecipe","ingredients","setIngredients","ingDetails","setIngDetails","instructions","setInstructions","servings","setServings","isFav","setIsFav","token","setToken","recID","setRecID","fetch","params","id","method","headers","then","res","json","extendedIngredients","checkFav","catch","err","console","log","steps","Authorization","data","handleAddToFav","body","JSON","stringify","textAlign","margin","title","image","calories","carbs","fat","protein","width","border","e","target","value","map","amount","unit","name","Math","random","number","step"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport \"../styles/OneRecipe.css\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { TokenContext } from \"./TokenContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { NavLink } from \"reactstrap\";\n\nconst OneRecipe = ({ match }) => {\n  const [recipe, setRecipe] = useState({});\n  const [ingredients, setIngredients] = useState([]);\n  const [ingDetails, setIngDetails] = useState([]);\n  const [instructions, setInstructions] = useState([]);\n  const [servings, setServings] = useState(1)\n  const [isFav, setIsFav] = useState(false);\n  const [token, setToken] = useContext(TokenContext);\n  const [recID, setRecID] = useState();\n\n  \n\n  useEffect(() => {\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/information?amount=1&apiKey=d21f98ccdf934ed5ac7c1e724093d571`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => {\n        setRecipe(res);\n        setRecID(res.id);\n        setIngredients(res.extendedIngredients);\n        if(token){\n        checkFav(res.id);}\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/nutritionWidget.json?&apiKey=d21f98ccdf934ed5ac7c1e724093d571`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => setIngDetails(res))\n      .catch((err) => {\n        console.log(err);\n      });\n    fetch(\n      `https://api.spoonacular.com/recipes/${match.params.id}/analyzedInstructions?&apiKey=d21f98ccdf934ed5ac7c1e724093d571`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((res) => setInstructions(res[0].steps))\n      .catch((err) => {\n        console.log(err);\n      });\n\n      const checkFav = (id) => {\n        fetch(`http://localhost:5000/check-fav/${id}`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        })\n          .then((res) => res.json())\n          .then((data) => console.log(data));\n      };\n\n  }, [match.params.id, token]);\n\n  const handleAddToFav = () => {\n    if (isFav) {\n      fetch(`http://localhost:5000/remove-fav/${recID}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        method: \"DELETE\",\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setIsFav(!isFav);\n          console.log(data);\n        });\n    } else {\n      fetch(\"http://localhost:5000/add-fav\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ recipe: recipe }),\n        method: \"POST\",\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setIsFav(!isFav);\n          console.log(data);\n        });\n    }\n  };\n\n  \n\n  return (\n    <div>\n      <Header x=\"#000\" />\n      <h2 style={{ textAlign: \"center\", margin: \"1rem 0\" }}>{recipe.title}</h2>\n      {token ? (\n        <NavLink\n          className=\"star\"\n          title={isFav ? \"remove from favorite\" : \"add to favorite\"}\n          onClick={handleAddToFav}\n        >\n          <FontAwesomeIcon icon={faStar} color={isFav ? \"yellow\" : \"gray\"} />\n        </NavLink>\n      ) : (\n        \"\"\n      )}\n\n      <div className=\"main-section\">\n        <div className=\"image-nutrition\">\n          <div className=\"recipe-image\">\n            <img id=\"image\" src={recipe.image} alt={recipe.title} />\n            <div className=\"recipe-nutrition\">\n              <span>Calories:{ingDetails.calories}</span>\n              <span>Carbs:{ingDetails.carbs}</span>\n              <span>Fat: {ingDetails.fat}</span>\n              <span>Protein: {ingDetails.protein}</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"ingrediets-instructions\">\n          <div className=\"ingredients-list\">\n            <h3 className=\"text\">Ingredients</h3>\n            <h5 className=\"text\">\n              Servings:\n              <input\n                style={{ width: \"30px\", border: \"none\" }}\n                type=\"Number\"\n                min=\"1\"\n                value={servings}\n                onChange={(e) => setServings(e.target.value)}\n              />\n              {/* <button className=\"serving-button\" onClick={(increase)}>+</button>\n                <button className=\"serving-button\" onClick={(decrease)}>-</button> */}\n            </h5>\n\n            <div className=\"ingredients-section\">\n              {console.log(recipe)}\n              {ingredients.map((res) => (\n                <div key={res.id} className=\"ingredients\">\n                  <p>\n                    {res.amount * servings} {res.unit}\n                  </p>\n                  <div className=\"imagine-ingredients-section\">\n                    <img\n                      src={`https://spoonacular.com/cdn/ingredients_100x100/${res.image}`}\n                      alt={res.title}\n                      className=\"image-ingredient\"\n                    />\n                  </div>\n                  <p>{res.name}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"instructions\">\n            <h3 style={{ textAlign: \"center\" }}>Instructions</h3>\n            {instructions.map((res) => (\n              <li key={Math.random()}>\n                Step {res.number} : {res.step}\n              </li>\n            ))}\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n};\nexport default OneRecipe;\n"]},"metadata":{},"sourceType":"module"}